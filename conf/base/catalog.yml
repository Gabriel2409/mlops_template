# Here you can define all your data sets by using simple YAML syntax.
#
# Documentation for this file format can be found in "The Data Catalog"
# Link: https://docs.kedro.org/en/stable/data/data_catalog.html

# --- initial files - already divided in train an test ---
# projects_train_raw_local:
#   type: pandas.CSVDataSet
#   filepath: data/01_raw/dataset.csv

projects_test_raw_local:
  type: pandas.CSVDataSet
  filepath: data/01_raw/holdout.csv

# projects_train_raw:
#     type: kedro_azureml.datasets.AzureMLAssetDataSet
#     azureml_dataset: train3
#     root_dir: data/00_azurelocals/ # for local runs only
#     versioned: True
#     azureml_type: uri_file
#     dataset:
#         type: pandas.CSVDataSet
#         filepath: "dataset.csv"

projects_test_raw:
  type: kedro_azureml.datasets.AzureMLAssetDataSet
  azureml_dataset: test3
  root_dir: data/00_azurelocals/ # for local runs only
  versioned: True
  azureml_type: uri_file
  dataset:
    type: pandas.CSVDataSet
    filepath: "holdout.csv"

projects_train_raw_local:
  type: PartitionedDataset
  path: data/partitioned_ds
  dataset:
    type: pandas.CSVDataSet

projects_train_raw:
  type: kedro_azureml.datasets.AzureMLAssetDataSet
  azureml_dataset: test4
  root_dir: data/00_azurelocals/ # for local runs only
  versioned: True
  azureml_type: uri_folder
  dataset:
    type: pandas.CSVDataSet
    filepath: "."

# mlflow artifacts: can not be passed between nodes with kedro-azureml if using a
# local path
# However, I don't like the idea of using a path on the storage because if two pipelines
# run concurrently, there might be some issues.
# -> workaround, only use them as outputs and not inputs

label_encoder_mapping_mlflow:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: json.JSONDataSet
    filepath: label_encoder_mapping.json

sklearn_classifier_mlflow:
  type: kedro_mlflow.io.models.MlflowModelLoggerDataSet
  flavor: mlflow.sklearn

optuna_best_params_mlflow:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: json.JSONDataSet
    filepath: best_params.json

train_metrics_mlflow:
  type: kedro_mlflow.io.metrics.MlflowMetricsDataSet

train_classification_report_mlflow:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: pandas.CSVDataSet
    filepath: train_classification_report.csv

train_confusion_matrix_mlflow:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: text.TextDataSet
    filepath: train_confusion_matrix.txt

test_metrics_mlflow:
  type: kedro_mlflow.io.metrics.MlflowMetricsDataSet

test_classification_report_mlflow:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: pandas.CSVDataSet
    filepath: test_classification_report.csv

test_confusion_matrix_mlflow:
  type: kedro_mlflow.io.artifacts.MlflowArtifactDataSet
  data_set:
    type: text.TextDataSet
    filepath: test_confusion_matrix.txt
